plugins {
	id 'java'
	id 'org.jetbrains.kotlin.jvm' version '1.9.22'
}
version '1.0'

compileKotlin {
	kotlinOptions.jvmTarget = JavaVersion.VERSION_21
}
compileTestKotlin {
	kotlinOptions.jvmTarget = JavaVersion.VERSION_21
}

repositories{
	maven{ url 'https://maven.aliyun.com/nexus/content/groups/public/'}
	maven{ url 'https://jitpack.io' }
	mavenCentral()
	google()
}

dependencies{
	compileOnly "com.github.Minxyzgo.RW-HPS:Server-Core:b0af9b77be"
	compileOnly fileTree(dir: '/libs', includes: ['*.jar'])
	testImplementation "com.github.Minxyzgo.RW-HPS:Server-Core:b0af9b77be"
}

jar{
	// Fuck Java 9
	exclude("META-INF/version/**")
	exclude("**/module-info.class")

	from{
		configurations.runtimeClasspath.collect{it.isDirectory() ? it : zipTree(it)}
	}
}

tasks.withType(JavaCompile) {  
	options.encoding = "UTF-8"  
	options.compilerArgs << "-Xlint:unchecked" << "-Werror"
	options.compilerArgs << "-Xdiags:verbose" << "-Werror"
	options.compilerArgs << "-Xlint:deprecation" << "-Werror"
}